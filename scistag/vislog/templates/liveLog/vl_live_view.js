function vl_handle_value_changed(e,t){vl_values[e]=String(t)}function setInnerHTML(e,t){e.innerHTML=t,Array.from(e.querySelectorAll("script")).forEach(e=>{const t=document.createElement("script");Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)});var n=document.createTextNode(e.innerHTML);t.appendChild(n),e.parentNode.replaceChild(t,e)})}function vl_handle_set_content(e,t){var n=e.get("targetElement"),e=document.getElementById(n);null!==e?setInnerHTML(e,t):console.log("Unknown element "+n)}function fetch_changes(){var e={values:vl_values};vl_values={},fetch(vl_fetch_url,{method:"POST",body:JSON.stringify(e),keepalive:!0,timeout:pageUpdateTimeout}).then(t=>{setTimeout(fetch_changes,pageUpdateFrequency),vl_lost_connection&&(vl_lost_connection=!1,console.log("Server connection restored")),200===t.status&&(pageUpdateFrequency=parseInt(t.headers.get("vlRefreshTime")),t.text().then(e=>{"setContent"===t.headers.get("action")&&vl_handle_set_content(t.headers,e)}))}).catch(function(e){vl_lost_connection||(vl_lost_connection=!0,console.log("Lost connection to the server")),setTimeout(fetch_changes,2e3)})}